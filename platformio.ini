[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

; PlatformIO automatically detects these directories:
; - src/        : Source files (.cpp)
; - include/    : Header files (.h, .hpp) - automatically added to include path
; - lib/        : Custom libraries
; - test/       : Unit tests
; - data/       : Filesystem data files

; Serial monitor settings
monitor_speed = 115200
monitor_filters = 
    default
    esp32_exception_decoder
; Note: Line ending is handled by Serial.println() which sends \r\n

; Build flags
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    -DLV_CONF_INCLUDE_SIMPLE
    -Ilib/TFT_eSPI_Config
    -DWOKWI_SIMULATOR ; Define this for Wokwi-specific workarounds

; Library dependencies
lib_deps = 
    lvgl/lvgl@^8.4.0
    bodmer/TFT_eSPI@^2.5.43
    adafruit/Adafruit GFX Library@^1.11.9
    adafruit/Adafruit TouchScreen@^1.1.4
    knolleary/PubSubClient@^2.8

; TFT_eSPI configuration
; PlatformIO will use our custom User_Setup.h from lib/TFT_eSPI_Config/

; Extra script to copy lv_conf.h to LVGL directory
extra_scripts = pre:extra_script.py

; Upload settings
upload_speed = 921600  ; Higher speed for faster uploads
; upload_port = /dev/ttyUSB0  ; Auto-detect port (comment out to auto-detect)
upload_flags = 
    --before=no_reset
    --after=hard_reset
    --chip=esp32

; Partition scheme (adjust based on your needs)
board_build.partitions = default.csv
board_build.filesystem = littlefs
